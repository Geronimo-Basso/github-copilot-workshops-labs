# SonarQube detailed instructions

## SonarQube extension for Visual Studio Code

The SonarQube extension for Visual Studio Code is a great tool for developers who want to continuously inspect their code quality. It provides on-the-fly feedback to developers on new bugs, vulnerabilities, and code smells injected into their code. The extension is available for free on the Visual Studio Code Marketplace.

Go to the Visual Studio Code Marketplace and search for SonarQube. Click on the Install button to install the extension.

![alt text](docs/image.png)

## Configuring the SonarQube connected mode

Once installed, you can configure the SonarQube extension to connect to your SonarQube server. To do this, you need to provide the URL of your SonarQube server and the authentication token.

    NOTE: if you do not have a SonarQube server, you can use the SonarQube Community Edition, which is free and open-source, running on your local machine as a Docker container. Go to this [link](#installing-sonarqube-locally-using-docker) in this doc for more information on how to set up SonarQube locally.

First, go to the SonarQube extension icon on the left sidebar of Visual Studio Code and click on the '+' icon to add a new SonarQube server.

![alt text](docs/image-1.png)

Next, provide the URL of your SonarQube server and the authentication token (this token can be generated by clicking on 'Generate Token'). 

![alt text](docs/image-2.png)

Then, use admin/admin:

![alt text](docs/image-3.png)

Update to new password: Ex: admin/admin123

![alt text](docs/image-4.png)

Accept permissions:

![alt text](docs/image-5.png)

And copy token to place it back on 'User Token' in 'SonarQube Server Connection' extension configuration:

![alt text](docs/image-6.png)

Finally, click on the 'Save Connection' button.

## Create a new SonarQube project

To create a new SonarQube project, go to 'Projects' in the SonarQube instance and click on 'Create a local project':

![alt text](docs/image-8.png)

Use demo as the project name and key and click on 'Next':

![alt text](docs/image-9.png)

Finally, set 'Global settings' and click on 'Create project':

![alt text](docs/image-10.png)

If you want to run the analysis locally, you can obtain the command by clicking on 'Locally':

![alt text](docs/image-11.png)

Then, generate a token: 

![alt text](docs/image-12.png)

Click on 'Continue':

![alt text](docs/image-13.png)

And copy the maven command:

![alt text](docs/image-14.png)

## Bind the project in the connected server

Bind the project in the connected server on the extension side. You can do this by clicking on the '+' icon next to the 'Projects' section in the SonarQube extension:

![alt text](docs/image-7.png) 

Then, select the project you created.

## Final result

Once everything has been set up and the analysis has been run, you will see the results in the SonarQube extension in Visual Studio Code. Check the 'Problems' views:

![alt text](docs/image-15.png)

Same results are shown in the SonarQube server:

![alt text](docs/image-16.png)


## Installing SonarQube locally using Docker

To install SonarQube locally using Docker, follow these steps:

```bash
docker run --name sonarqube-custom -p 9000:9000 sonarqube:10.6-community
```

This command will run a SonarQube Community Edition container on your local machine. You can access the SonarQube server by going to http://localhost:9000 in your web browser.

In case you would like to expose it to the network, you can use tools such as [ngrok](https://ngrok.com/) to create a public URL for your local server.

```bash
ngrok http 9000
```


